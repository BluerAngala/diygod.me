---
title: 小米手环 4 NFC 模拟加密卡探索
date: 2019-06-28 01:06:12
categories: 分享境
---
小米手环 4 NFC 版一发售就迫不及待找黄牛买了一只

手环的 NFC 主要有三个功能：小爱同学、公交卡、模拟门禁卡

结果手环的小爱同学很难用，功能缺失、反应慢[还老骂我](https://twitter.com/DIYgod/status/1141718298658086913)，上海公交也不支持，门禁卡顿时成为了全村人的希望，正好我有两个门禁卡，试着模拟一下吧

![](/images/pn5321.jpg)

这 NFC 一事无成，像极了人生
<!--more-->
第一张是 ID 卡，铁定没救了，希望全在第二张加密 IC 卡上，为了拯救鸡肋的 NFC，我到淘宝买了一个 NFC 读写器 PN532

把加密卡放到 PN532 上读取数据

![](/images/pn5322.jpg)

使用 MifareOne Tool 解卡

![](/images/pn5323.png)

解卡失败...根据网上的说法可能是 PN532 过热导致的，那么哪里最凉快呢？

冰箱

![](/images/pn5324.jpg)

经过漫长的等待，成功了

![](/images/pn5325.png)

得到加密卡数据

![](/images/pn5326.png)

然后把其中的 0 扇区 0 区块数据写入一张空白卡

![](/images/pn5327.jpg)

![](/images/pn5328.png)

然后再把空白卡的数据写入手环

![](/images/pn5329.jpg)

![](/images/pn53210.jpg)

这时候手环上就有卡了，但是里面只有 0 扇区 0 区块数据，这时候再把剩下的数据写到手环里就好了

![](/images/pn53211.jpg)

![](/images/pn53212.png)

验证：对比原卡和手环卡的数据，

![](/images/pn53213.png)
![](/images/pn53214.png)

只有 0 扇区 0 区块的部分数据（厂商号）不同，且 15 扇区的加密数据相同，说明已经模拟成功

NFC 终于没白买